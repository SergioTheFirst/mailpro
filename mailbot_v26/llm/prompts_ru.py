"""
Промпты и триггеры для тупой LLM.
Жёсткие рамки. Никакой самодеятельности.
"""

# ==========================================================
# ТРИГГЕРЫ ТИПОВ ПИСЕМ (можно расширять до 1000+)
# ==========================================================

TRIGGERS = {
    "BANK": [
        "банк", "счет", "счёт", "платеж", "платёж", "выписка",
        "зачисление", "списание", "остаток", "комиссия"
    ],
    "TAX_FNS": [
        "фнс", "налог", "декларация", "уведомление фнс",
        "камеральная", "штраф", "пени"
    ],
    "COURT": [
        "суд", "арбитраж", "иск", "определение",
        "решение суда", "повестка"
    ],
    "DOMAIN": [
        "домен", "регистрация домена", "продлить домен",
        "expires", "expiration", "reg.ru", "nic.ru"
    ],
    "HR": [
        "кадры", "hr", "резюме", "собеседование",
        "трудовой договор", "приказ"
    ],
    "LOGISTICS": [
        "доставка", "отгрузка", "накладная",
        "трек", "shipment", "logistics"
    ],
    "LEGAL": [
        "договор", "контракт", "соглашение",
        "оферта", "устав"
    ],
    "INVOICE": [
        "счет", "счёт", "invoice", "оплата",
        "к оплате", "bill"
    ],
    "DEADLINE": [
        "срок", "истекает", "не позднее",
        "до", "deadline"
    ],
    "NOTIFICATION": [
        "уведомление", "сообщаем", "информируем",
        "notice"
    ],
    "SPAM": [
        "реклама", "sale", "скидк", "offer",
        "buy now"
    ],
}

# ==========================================================
# АНТИГАЛЛЮЦИНАЦИОННЫЕ БАЗОВЫЕ ПРОМПТЫ
# ==========================================================

EMAIL_CHUNK = """
Ты анализируешь ФРАГМЕНТ делового письма.

ЖЁСТКИЕ ПРАВИЛА:
- Используй ТОЛЬКО информацию из текста.
- Если данных нет — скажи, что данных нет.
- Не придумывай даты, суммы, номера.
- Не делай выводов.
- 1–2 предложения.
- Русский деловой язык.

Текст:
{text}
"""

EMAIL_MERGE = """
Перед тобой краткие описания одного письма.

ПРАВИЛА:
- Объедини без добавления новой информации.
- Убери повторы.
- Если информации недостаточно — так и укажи.
- 2–4 предложения.

Фрагменты:
{summaries}
"""

# ==========================================================
# ФИНАЛЬНЫЕ ПРОМПТЫ ПО ТИПАМ ПИСЕМ
# ==========================================================

FINAL_PROMPTS = {
    "BANK": """
Это банковское письмо.

ПРАВИЛА:
- О чём уведомляет банк.
- Есть ли движение средств или действие.
- Не указывай цифры, если их нет в тексте.
- 2–3 предложения.

Текст:
{summary}
""",
    "TAX_FNS": """
Это письмо от налогового органа.

ПРАВИЛА:
- О чём уведомление.
- Требуется ли действие.
- Без юридических трактовок.
- 2–3 предложения.

Текст:
{summary}
""",
    "COURT": """
Это судебное письмо.

ПРАВИЛА:
- Тип документа.
- Что сообщается.
- Требуется ли реакция.
- 2–4 предложения.

Текст:
{summary}
""",
    "DOMAIN": """
Это письмо о домене.

ПРАВИЛА:
- Что происходит с доменом.
- Есть ли срок.
- Требуется ли продление.
- 2–3 предложения.

Текст:
{summary}
""",
    "HR": """
Это кадровое письмо.

ПРАВИЛА:
- О чём письмо.
- Требуется ли ответ или действие.
- 2–3 предложения.

Текст:
{summary}
""",
    "LOGISTICS": """
Это письмо по логистике или доставке.

ПРАВИЛА:
- Что отправлено или ожидается.
- Есть ли статус.
- 2–3 предложения.

Текст:
{summary}
""",
    "LEGAL": """
Это юридический документ.

ПРАВИЛА:
- Тип документа.
- Его назначение.
- 2–4 предложения.

Текст:
{summary}
""",
    "INVOICE": """
Это письмо со счётом или оплатой.

ПРАВИЛА:
- Что требуется оплатить.
- Есть ли срок.
- Без домыслов.
- 2–3 предложения.

Текст:
{summary}
""",
    "DEADLINE": """
Это письмо о сроках.

ПРАВИЛА:
- Какой срок упоминается.
- К чему он относится.
- 2–3 предложения.

Текст:
{summary}
""",
    "SPAM": """
Это нерелевантное или рекламное письмо.

ПРАВИЛА:
- Одно предложение.
- Укажи, что письмо рекламное.

Текст:
{summary}
""",
    "GENERIC": """
Объясни общий смысл письма.

ПРАВИЛА:
- О чём письмо.
- Требуется ли действие.
- 2–4 предложения.

Текст:
{summary}
""",
}

# ==========================================================
# ПРОМПТЫ ДЛЯ ВЛОЖЕНИЙ ПО ТИПАМ ФАЙЛОВ
# ==========================================================

ATTACHMENT_CHUNK_PDF = """
Ты анализируешь фрагмент текста PDF-документа.

ПРАВИЛА:
- Что это за документ.
- О чём он.
- Без домыслов.
- 1–2 предложения.

Текст:
{text}
"""

ATTACHMENT_CHUNK_EXCEL = """
Ты анализируешь фрагмент таблицы.

ПРАВИЛА:
- Что отражают данные.
- Назначение таблицы.
- Без расчётов.
- 1–2 предложения.

Текст:
{text}
"""

ATTACHMENT_CHUNK_CONTRACT = """
Ты анализируешь фрагмент договора.

ПРАВИЛА:
- Тип договора.
- Предмет.
- Без юридических выводов.
- 1–2 предложения.

Текст:
{text}
"""

ATTACHMENT_MERGE = """
Объедини описание документа.

ПРАВИЛА:
- Что это за документ.
- Зачем он нужен.
- 1–3 предложения.

Фрагменты:
{summaries}
"""
